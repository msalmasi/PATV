<!-- views/profile.ejs -->
<%- include('layout', { title: `${usernameProfile} on Public Access`, user: username}) %>

        <body>
            <div class="profile-container">
                <div id="profile-header"><img src="<%= avatar %>" alt="User Avatar"><h1><%= displayname %></h1>                
                    <% if (username == usernameProfile) { %>
                    <div id="profile-action"> 
                        <a href="/u/<%= username %>/profile/edit" class="infolink">Edit</a>
                    </div>
                    <% } else { %>
                        <% if (typeof username == 'undefined' || !username) { %>
                            <% } else { %>
                        <div id="profile-action"> 
                            <a href="/u/<%= usernameProfile %>/tip" class="infolink">Tip</a>
                        </div>
                        <% } %>
                            
                        <% } %></div><br>
                        <div class="level-display" style="text-align: center;">
                            Level <%= level %>
                            <div class="level-bar">
                                
                                <div class="level-progress" style="width: <%= (xp / xpForNextLevel(level) * 100) %>%;"><span><%= xp %></span></div>
                                
                            </div>
                            <div class="level-info" style="text-align: center;">
                                Next Level: <%= xpForNextLevel(level) - xp %> XP
                            </div>
                        </div>
                <div id="profile-content">         
                    <p><%= usernameProfile %></p><%= classh %>
                    <p>PAT <%= points_balance %></p>
                    <% if (username == usernameProfile) { %>
                    <form action="/logout" method="POST" style="display: inline;">
                        <button class="link-button" type="submit">Log Out</button>
                    </form>
                    <% } else { %>
                        <% } %>
                </div>


                
            </div>

            <div class="profile-container">
                <div id="profile-header">
                <h1>Badges</h1>
            </div>
                <div class="profile-badges">
                  <% badges.forEach(badge => { %>
                    <div class="badge">
                      <img src="<%= badge.icon %>" title="<%= badge.description %>" style="height:50px;">
                      <strong><%= badge.name %></strong> 
                    </div>
                  <% }) %>
                </div>
            </div>
        </body>